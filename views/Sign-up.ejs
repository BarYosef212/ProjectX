<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign Up</title>
    <link rel="stylesheet" href="/Styles/main.css" />
  </head>
  <body>
    <%- include('partials/header') %>
    <main>
      <div class="content">
        <h2>Sign Up</h2>

        

        <form
          id="signup-form"
          action="/register"
          method="POST"
          onsubmit="return validatePasswords()"
        >
          <div class="h7">Welcome, Please Fill The Following</div>

          <input
            type="text"
            id="first-name"
            name="firstName"
            placeholder="First Name"
            required
          />

          <input
            type="text"
            id="last-name"
            name="lastName"
            placeholder="Last Name"
            required
          />

          <input
            type="email"
            id="email"
            name="email"
            placeholder="Email Address"
            required
          />

          <!-- Display error message if it exists -->
        <% if (typeof error !== 'undefined') { %>
          <p style="color: red; text-align: left"><%= error %></p>
          <% } %>

          <input
            type="password"
            id="signPassword"
            name="password"
            placeholder="Password"
            required
          />

          <input
            type="password"
            id="confirm-password"
            name="confirm-password"
            placeholder="Confirm Password"
            required
          />
          <!-- Display password error message -->
          <p
            id="password-error"
            style="color: red; display: none; text-align: left"
          >
            Passwords do not match
          </p>

          <br /><br />

          <div class="checkbox-container">
            <input type="checkbox" id="marketing" name="marketing" />
            <label for="marketing">I want to receive marketing content</label>
          </div>

          <!-- Terms of Use Approval -->
          <div class="checkbox-container">
            <input type="checkbox" id="terms" name="terms" required />
            <label for="terms"
              >I agree to the <a class="terms" href="#">Terms Of Use</a></label
            >
          </div>

          <button class="btn" type="submit">Sign Up</button>
        </form>
      </div>
    </main>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const signupForm = document.getElementById("signup-form");
        const passwordField = document.getElementById("signPassword");
        const confirmPasswordField =
          document.getElementById("confirm-password");
        const passwordError = document.getElementById("password-error");

        function validatePasswords() {
          const password = passwordField.value;
          const confirmPassword = confirmPasswordField.value;

          if (password !== confirmPassword) {
            // Show error message
            passwordError.style.display = "block";
            return false; // Prevent form submission
          } else {
            // Hide error message if passwords match
            passwordError.style.display = "none";
            return true; // Allow form submission
          }
        }

        // Reset the error message when typing into the password or confirm-password fields
        passwordField.addEventListener("input", function () {
          passwordError.style.display = "none";
        });

        confirmPasswordField.addEventListener("input", function () {
          passwordError.style.display = "none";
        });

        // Attach the validatePasswords function to the form's submit event
        signupForm.onsubmit = validatePasswords;
      });
    </script>
  </body>
</html>
